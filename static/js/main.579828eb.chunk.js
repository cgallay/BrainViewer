(this.webpackJsonpBrainViwer=this.webpackJsonpBrainViwer||[]).push([[0],{255:function(e,a,t){e.exports=t(479)},260:function(e,a,t){},262:function(e,a,t){},463:function(e,a,t){e.exports=t.p+"static/media/brain_icon.bcb183bd.svg"},479:function(e,a,t){"use strict";t.r(a);var n=t(1),r=t.n(n),l=t(9),o=t.n(l),c=(t(260),t(21)),i=(t(261),t(262),t(19)),s=t(12),u=t(482),d=t(230),m=t(220),p=t.n(m),f=t(16),h=t.n(f),g=t(92),E=t.n(g),v=function(e){var a=null,t=null;if(h.a.isCompressed(e)&&(e=h.a.decompress(e)),h.a.isNIFTI(e)){var n;if(a=h.a.readHeader(e),t=h.a.readImage(a,e),a.datatypeCode===h.a.NIFTI1.TYPE_UINT8)n=new Uint8Array(t);else if(a.datatypeCode===h.a.NIFTI1.TYPE_INT16)n=new Int16Array(t);else if(a.datatypeCode===h.a.NIFTI1.TYPE_INT32)n=new Int32Array(t);else if(a.datatypeCode===h.a.NIFTI1.TYPE_FLOAT32)n=new Float32Array(t);else if(a.datatypeCode===h.a.NIFTI1.TYPE_FLOAT64)n=new Float64Array(t);else if(a.datatypeCode===h.a.NIFTI1.TYPE_INT8)n=new Int8Array(t);else if(a.datatypeCode===h.a.NIFTI1.TYPE_UINT16)n=new Uint16Array(t);else{if(a.datatypeCode!==h.a.NIFTI1.TYPE_UINT32)return;n=new Uint32Array(t)}console.log(a),h.a.hasExtension(a)&&h.a.readExtensionData(a,e);var r=E.a.array([].slice.call(n)).reshape(182,218,182)}try{var l=JSON.parse(a.description)}catch(o){l={}}return r=E.a.flip(r,1),[r=E.a.flip(r,0).clone(),l]};var b=function(e){var a=e.imageArray,t=e.attentionScale,l=e.selectedMap,o=e.attentionMapCallback,m=Object(n.useRef)(null),f=Object(n.useRef)(null),h=Object(n.useRef)(null),g=Object(n.useState)(null),E=Object(c.a)(g,2),b=E[0],w=E[1],y=Object(n.useState)(null),I=Object(c.a)(y,2),O=I[0],T=I[1],j=Object(n.useState)([90,120,120]),A=Object(c.a)(j,2),C=A[0],N=A[1],M=[182,218,182],F=[400,Math.round(400/M[0]*M[1]),Math.round(400/M[0]*M[2])];return console.log(F),Object(n.useEffect)((function(){var e=i.b;function n(e,a,t,n){var r=a.max(),l=0;if(0==n)var o=M[1],c=M[2];else if(2==n)o=M[0],c=M[1];else o=M[0],c=M[2];for(var i=e.node().getContext("2d"),s=i.createImageData(c,o),u=0;u<o;++u)for(var d=0;d<c;++d){var m=[u,d];m.splice(n,0,t),s.data[l+0]=a.get.apply(a,m)/r*255,s.data[l+1]=a.get.apply(a,m)/r*255,s.data[l+2]=a.get.apply(a,m)/r*255,s.data[l+3]=255,l+=4}i.putImageData(s,0,0)}function r(a,n,r,l){var o=n.min(),c=n.max(),s=0;if(0==l)var u=M[1],d=M[2];else if(2==l)u=M[0],d=M[1];else u=M[0],d=M[2];for(var m=document.createElement("canvas"),p=(m=i.d(m).attr("width",d).attr("height",u)).node().getContext("2d"),f=p.getImageData(0,0,d,u),h=0;h<u;++h)for(var g=0;g<d;++g){var E=[h,g];E.splice(l,0,r);var v=(n.get.apply(n,E)-o)/(c-o);null!==t&&(v=Math.pow(v,t));var b=i.c(e(v));f.data[s+0]=b.r,f.data[s+1]=b.g,f.data[s+2]=b.b,f.data[s+3]=100,s+=4}p.putImageData(f,0,0),a.node().getContext("2d").drawImage(m.node(),0,0)}function o(){console.log("Drawing"),null!==a&&l.includes("Brain")&&(n(c,a,C[0],0),n(s,a,C[2],2),n(u,a,C[1],1)),b&&l.includes("Attention Map")&&(r(c,b,C[0],0),r(s,b,C[2],2),r(u,b,C[1],1))}var c=i.d(m.current).attr("width",M[0]).attr("height",M[1]),s=i.d(f.current).attr("width",M[1]).attr("height",M[2]),u=i.d(h.current).attr("width",M[0]).attr("height",M[2]);c.on("click",(function(){var e=Math.round(i.a.offsetY/F[1]*M[1]),a=Math.round(i.a.offsetX/F[0]*M[0]);C[1]=e,C[2]=a,N(C),o()})),s.on("click",(function(){var e=Math.round(i.a.offsetY/F[2]*M[2]),a=Math.round(i.a.offsetX/F[1]*M[1]);C[0]=e,C[1]=a,N(C),o()})),u.on("click",(function(){var e=Math.round(i.a.offsetY/F[0]*M[0]),a=Math.round(i.a.offsetX/F[2]*M[2]);C[0]=e,C[2]=a,N(C),o()})),o()}),[a,b,t,l]),r.a.createElement("div",null,r.a.createElement("table",{style:{"background-color":"black",border:0,cellspacing:0}},r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("canvas",{ref:h,style:{width:F[0]}})),r.a.createElement("td",null,r.a.createElement("canvas",{ref:f,style:{width:F[1]}}))),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("canvas",{ref:m,style:{width:F[2]}})),r.a.createElement("td",null,null===b?r.a.createElement("div",{style:{height:200,width:200,textAlign:"center",margin:"auto"}},r.a.createElement(p.a,{showUploadList:!1,action:function(e){var a=new FileReader;a.onloadend=function(e){var t=v(a.result),n=Object(c.a)(t,2),r=n[0],l=n[1];T(l),w(r)},a.readAsArrayBuffer(e),o()},customRequest:function(){return null}},r.a.createElement(s.a,{type:"plus",style:{fontSize:50}}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("p",{className:"ant-upload-hint"},"Click or drag attention map to this area for visualization."))):r.a.createElement("div",null,0===Object.keys(O).length?"":r.a.createElement("div",{style:{padding:"60px"}},r.a.createElement(u.a,null,r.a.createElement(d.a,{type:"dashboard",percent:Math.round(100*O.pred)}),r.a.createElement("p",null,"Dementia prediction"),r.a.createElement("p",null,"Ground truth is ",1===O.label?"Dementia":"Control"))))))))},w=t(486),y=t(481),I=t(51),O=t(24),T=t(483),j=t(484),A=t(485),C=t(131);C.a.initialize("UA-158864251-1"),C.a.pageview(window.location.pathname+window.location.search);var N=w.a.Dragger;var M=function(){var e=Object(n.useState)(!1),a=Object(c.a)(e,2),l=a[0],o=a[1],i=Object(n.useState)(!1),s=Object(c.a)(i,2),d=s[0],m=s[1],p=Object(n.useState)(null),f=Object(c.a)(p,2),h=f[0],g=f[1],E=Object(n.useState)(1),w=Object(c.a)(E,2),C=w[0],M=w[1],F=Object(n.useState)(["Brain"]),k=Object(c.a)(F,2),x=k[0],S=k[1];return r.a.createElement("div",{className:"App"},l?r.a.createElement("div",null,r.a.createElement(I.a,null,r.a.createElement(O.a,{span:18},r.a.createElement(b,{imageArray:h,attentionScale:C,selectedMap:x,attentionMapCallback:function(){return S(x.concat(["Attention Map"]))}})),r.a.createElement(O.a,{span:6},r.a.createElement(u.a,{title:"Control Panel"},r.a.createElement(T.a,{min:1,max:10,onChange:M,value:"number"===typeof C?C:0,step:1}),r.a.createElement(j.a,{min:1,max:10,step:1,value:C,onChange:M}),r.a.createElement(A.a.Group,{options:["Brain","Attention Map"],value:x,onChange:S}))))):r.a.createElement(y.a,{tip:"Loading...",spinning:d,size:"large"},r.a.createElement(N,{showUploadList:!1,action:function(e){m(!0);var a=new FileReader;a.onloadend=function(e){var t=v(a.result),n=Object(c.a)(t,2),r=n[0];n[1];g(r),m(!1),o(!0)},a.readAsArrayBuffer(e)},customRequest:function(){return null}},r.a.createElement("div",{className:"custom-dragger"},r.a.createElement("img",{src:t(463),height:100,width:100}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("p",{className:"ant-upload-text"},"Click or drag image to this area for visualization.")))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(M,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[255,1,2]]]);
//# sourceMappingURL=main.579828eb.chunk.js.map